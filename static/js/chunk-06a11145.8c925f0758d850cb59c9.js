(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-06a11145"],{"0021":function(t,e,i){"use strict";var a=i("365c"),s=(i("313e"),{data:()=>({options:{}}),props:{},mounted(){this.getData()},methods:{getData(){this.pageflag=!0,Object(a.b)("oneweekfpy",{}).then(t=>{console.log("res>>>>>>>>>>",t),t.success?this.init(t.data):(this.pageflag=!1,this.$Message({text:t.msg,type:"warning"}))})},init(t){let e=t.result;if(e=this.fillMissingWithLast(e),console.log(">>>>>>>>>>>>:",e),!e||0==e.length)return void this.$Message({text:"当前未获取到设备信息",type:"warning"});const i=e[0].week.map(t=>t.date),a=e.map(t=>t.modeltype),s=e.flatMap(t=>t.week.map(t=>null!=t.fpy?t.fpy:1)),n=Math.min(...s),o=Math.max(...s),r=Math.max(0,n-.05),l=Math.min(1,o+.05),c=e.map(t=>({name:t.modeltype,type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:8,yAxisIndex:0,itemStyle:{color:this.getRandomBrightColor()},data:t.week.map(t=>null!=t.fpy?t.fpy:1)}));this.options={tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.6)",borderColor:"rgba(147, 235, 248, .8)",textStyle:{color:"#FFF"}},legend:{data:a,textStyle:{color:"#B4B4B4"},top:"0"},grid:{left:"50px",right:"40px",bottom:"30px",top:"20px"},xAxis:{data:i,axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1}},yAxis:[{type:"value",min:r,max:l,splitLine:{show:!1},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:t=>Math.round(100*t)+"%"}}],series:c}},fillMissingWithLast:t=>t.map(t=>{let e=null,i=null;return t.week=t.week.map(t=>(null==t.fpy&&null!=e?t.fpy=e:null!=t.fpy&&(e=t.fpy),null==t.yield&&null!=i?t.yield=i:null!=t.yield&&(i=t.yield),t)),t}),getRandomBrightColor:()=>`hsl(${Math.floor(360*Math.random())}, 100%, 60%)`}}),n=(i("f8b7"),i("2877")),o=Object(n.a)(s,(function(){var t=this._self._c;return t("div",{staticClass:"center_bottom"},[t("Echart",{staticClass:"echarts_bottom",attrs:{options:this.options,id:"bottomLeftChart"}})],1)}),[],!1,null,"2e3f4e60",null);e.a=o.exports},"0183":function(t,e,i){},"0230":function(t,e,i){"use strict";i("6e1a")},"29bb":function(t,e,i){"use strict";var a=[function(){var t=this._self._c;return t("div",{staticClass:"avatar"},[t("img",{attrs:{src:i("5d52"),alt:"头像"}})])},function(){var t=this._self._c;return t("div",{staticClass:"star-item"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:i("5d52"),alt:"头像"}})]),t("div",{staticClass:"rank-number silver"},[this._v("2")])])},function(){var t=this._self._c;return t("div",{staticClass:"star-item"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:i("5d52"),alt:"头像"}})]),t("div",{staticClass:"rank-number bronze"},[this._v("3")])])}],s=i("365c"),n={data:()=>({list:[],pageflag:!1}),mounted(){this.getData()},methods:{getData(){this.pageflag=!0,Object(s.b)("mingrichuanqi",{limitNum:20}).then(t=>{t.success&&Array.isArray(t.data)?this.list=t.data.sort((t,e)=>t.rank-e.rank).slice(0,3):(this.pageflag=!1,this.$Message({text:t.msg||"获取数据失败",type:"warning"}))})}}},o=(i("b4ff"),i("2877")),r=Object(o.a)(n,(function(){var t=this._self._c;return t("div",{staticClass:"stars-module"},[t("div",{staticClass:"stars-container"},[this.list[0]?t("div",{staticClass:"top-star"},[this._m(0),t("div",{staticClass:"rank-number gold"},[this._v("1")])]):this._e(),this.list.length>=3?t("div",{staticClass:"bottom-stars"},[this._m(1),this._m(2)]):this._e()])])}),a,!1,null,"8aa74d08",null);e.a=r.exports},"365c":function(t,e,i){"use strict";var a=i("c270");i.d(e,"b",(function(){return a.a}));var s=i("4ec3");i.d(e,"a",(function(){return s.b}))},"4ec3":function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return f}));var a=i("bc3a"),s=i.n(a);console.log(Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",VUE_APP_outputDir:"dist",VUE_APP_TITLE:"大屏展示系统",BASE_URL:""}));var n={ENC:!1,baseUrl:"/prod-api",code:401};i("a18c");let o=n.baseUrl;s.a.CancelToken;s.a.interceptors.request.use((function(t){let e=localStorage.getItem("token");return t.headers.common["Content-Type"]="application/json;charset=utf-8",t.headers.common.token=e,t}),(function(t){return console.log(t),Promise.reject(t)})),s.a.interceptors.response.use(t=>200!==t.status?Promise.reject(t):(t.data.code,t.data),t=>{console.error(t);return Promise.reject({success:!1,msg:"未知异常，请联系管理员！"})});let r={headers:{enc:n.ENC}};const l=async(t,e)=>{try{e=e;return await s.a.get(`${o}${t}`,{params:e,headers:r.headers},r)}catch(t){return t}},c=async(t,e)=>{try{return await s.a.get(t,{params:e})}catch(t){return t}},f=async(t,e)=>{try{e=e;return await s.a.post(`${o}${t}`,e,r)}catch(t){return t}}},5108:function(t,e,i){"use strict";var a=i("365c"),s=(i("313e"),{data:()=>({options:{},currentShift:"dayShift",timer:null,resultData:null,banci:"",searchDate:""}),props:{},mounted(){this.searchDate=this.getCurrentDateFormatted(),this.getData(this.searchDate)},beforeDestroy(){this.timer&&clearInterval(this.timer)},methods:{getData(t){Object(a.b)("onedayfpy",{date:t}).then(t=>{console.log("WWWWWWWWWW:",JSON.stringify(t.data)),t.success?(this.resultData=this.fillMissingWithLast(t.data),this.init(this.currentShift),this.startShiftCycle()):this.$Message({text:t.msg,type:"warning"})})},startShiftCycle(){this.timer=setInterval(()=>{this.currentShift="dayShift"===this.currentShift?"nightShift":"dayShift",this.banci="dayShift"==this.currentShift?"白班":"夜班",this.init(this.currentShift)},1e5)},init(t){if(!this.resultData||!this.resultData[t]||0===this.resultData[t].length)return void this.$Message({text:"当前未获取到设备信息",type:"warning"});const e=this.resultData[t],i=e[0].hours.map(t=>t.timeRange),a=e.map(t=>t.modeltype),s=e.flatMap(t=>t.hours.map(t=>t.fpy).filter(t=>null!==t)),n=Math.min(...s),o=Math.max(...s),r=Math.max(0,n-.05),l=Math.min(1,o+.05),c=e.map(t=>({name:t.modeltype,type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:8,yAxisIndex:0,itemStyle:{color:this.getRandomBrightColor()},data:t.hours.map(t=>null!=t.fpy?t.fpy:null)}));this.options={tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.6)",borderColor:"rgba(147, 235, 248, .8)",textStyle:{color:"#FFF"}},legend:{data:a,textStyle:{color:"#B4B4B4"},top:"0"},grid:{left:"50px",right:"40px",bottom:"50px",top:"20px"},xAxis:{data:i,boundaryGap:!1,axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1},axisLabel:{interval:0,rotate:20}},yAxis:[{type:"value",min:r,max:l,splitLine:{show:!1},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:t=>Math.round(100*t)+"%"}}],series:c}},fillMissingWithLast:t=>t,getRandomBrightColor:()=>`hsl(${Math.floor(360*Math.random())}, 100%, 60%)`,getCurrentDateFormatted(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}}}),n=(i("0230"),i("2877")),o=Object(n.a)(s,(function(){var t=this._self._c;return t("div",{staticClass:"center_bottom",staticStyle:{overflow:"visible"}},[t("div",{staticClass:"lefttip"},[this._v(this._s(this.banci))]),t("div",{staticClass:"righttip"},[this._v(this._s(this.searchDate))]),t("Echart",{staticClass:"echarts_bottom",attrs:{options:this.options,id:"bottomLeftChart"}})],1)}),[],!1,null,"181d248a",null);e.a=o.exports},"5d52":function(t,e,i){t.exports=i.p+"static/img/touxiangdemo.c32dbe96.png"},"626c":function(t,e,i){"use strict";i("0183")},"6e1a":function(t,e,i){},8145:function(t,e,i){},9268:function(t,e,i){"use strict";const a=i("313e");var s={props:{mainData:{type:Object,default:()=>({})}},data:()=>({myChartPieLeft:null}),mounted(){this.myChartPieLeft=a.init(this.$refs.fpyChart),this.hasValidData(this.mainData)&&this.updateChart(this.mainData)},beforeDestroy(){this.myChartPieLeft&&(this.myChartPieLeft.dispose(),this.myChartPieLeft=null)},watch:{mainData:{handler(t){this.hasValidData(t)&&this.updateChart(t)},deep:!0,immediate:!0}},methods:{hasValidData:t=>t&&t.xAxisData&&t.xAxisData.length>0,resizeChart(){this.myChartPieLeft&&this.myChartPieLeft.resize()},updateChart(t){const{xAxisData:e,batchCounts:i,fpyRates:a,passRates:s}=t;let n={backgroundColor:"transparent",title:{text:"FPY & Pass Rate",left:"center",top:10,textStyle:{color:"#ffffff",fontSize:20,fontWeight:"bold"}},grid:{top:90,left:60,right:60,bottom:60},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(50,50,50,0.9)",textStyle:{color:"#fff"}},legend:{data:["产出批次数","FPY","良率"],top:50,textStyle:{color:"#ffffff",fontSize:14}},xAxis:{type:"category",data:e,axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{color:"#ffffff",fontSize:14}},yAxis:[{type:"value",name:"产出批次数",position:"left",axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{color:"#ffffff",fontSize:14},splitLine:{show:!1}},{type:"value",name:"通过率 (%)",position:"right",min:0,max:1,axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{color:"#ffffff",fontSize:14,formatter:"{value}"},splitLine:{show:!1}}],series:[{name:"产出批次数",type:"bar",data:i,yAxisIndex:0,barWidth:20,itemStyle:{color:"#4ECB73",borderRadius:[4,4,0,0]},label:{show:!0,position:"top",color:"#ffffff",fontSize:12}},{name:"FPY",type:"line",data:a,yAxisIndex:1,itemStyle:{color:"#ffb74d"},lineStyle:{width:3},symbol:"circle",symbolSize:8,label:{show:!0,formatter:({value:t})=>(100*t).toFixed(1)+"%",color:"#ffffff",fontSize:12}},{name:"良率",type:"line",data:s,yAxisIndex:1,itemStyle:{color:"#FC8452"},lineStyle:{width:3},symbol:"circle",symbolSize:8,label:{show:!0,formatter:({value:t})=>(100*t).toFixed(1)+"%",color:"#ffffff",fontSize:12}}]};this.myChartPieLeft.setOption(n)}}},n=i("2877"),o=Object(n.a)(s,(function(){return(0,this._self._c)("div",{ref:"fpyChart",staticStyle:{width:"100%",height:"100%"}})}),[],!1,null,"1c7fa012",null);e.a=o.exports},"928e":function(t,e,i){},9804:function(t,e,i){"use strict";var a=i("365c"),s={data:()=>({options:{}}),props:{},mounted(){this.getData()},methods:{getData(){this.pageflag=!0,Object(a.b)("guzhangshichang",{}).then(t=>{console.log("故障时长res>>>>>>>>>>",t),t.success?this.init(t.data):(this.pageflag=!1,this.$Message({text:t.msg,type:"warning"}))})},init(t){if(!t)return void this.$Message({text:"当前未获取到设备信息",type:"warning"});const e=t;e.lines.forEach(t=>{t.totalDuration=t.segments.reduce((t,e)=>t+e.duration,0)}),e.lines.sort((t,e)=>e.totalDuration-t.totalDuration);const i=["red","#3ABFB4","#4ECDC4","#68D8D0","#82E3DC","#9CEEE8","#B6F9F4"];e.lines.forEach(t=>{[...t.segments].sort((t,e)=>e.duration-t.duration).forEach((t,e)=>{t.color=i[Math.min(e,i.length-1)]})}),this.options={backgroundColor:"#0f1c3c",title:{text:"",left:"center",textStyle:{color:"#fff",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{const i=t[0].name,a=e.lines.find(t=>t.line_id===i);return`\n          ${i}<br/>\n          总时长: ${a.total_fault}min<br/>\n          显示比例: ${a.display_ratio}%<br/>\n         ${t.map(t=>{const e=t.seriesName.includes("占比")?"%":"min";return`${t.marker} ${t.seriesName}: ${t.value}${e}`}).join("<br/>")}\n        `}},grid:{left:"3%",right:"4%",bottom:"1%",containLabel:!0},xAxis:{type:"category",data:e.lines.map(t=>t.line_id),axisLine:{lineStyle:{color:"#fff"}},axisLabel:{color:"#fff",rotate:30}},yAxis:[{type:"value",name:"故障时长(min)",min:0,max:180,axisLine:{lineStyle:{color:"#fff"}},axisLabel:{color:"#fff",formatter:function(t){return 180===t?t+"\n(100%)":t}},splitLine:{lineStyle:{color:"rgba(255,255,255,0.1)"}}},{type:"value",show:!1,min:0,max:100}],series:[...e.time_intervals.map((t,i)=>{const a=e.lines.map(e=>{const i=e.segments.find(e=>e.range===t);return i?i.duration:0});Math.max(...a);return{name:t,type:"bar",stack:"total",barWidth:"60%",itemStyle:{color:t=>{const i=e.lines[t.dataIndex].segments.find(e=>e.range===t.seriesName);return i?i.color:"#CCCCCC"}},data:a,label:{show:!0,position:"insideLeft",formatter:"{@value}",color:"#fff",fontSize:12,offset:[-22,0]}}}),{name:"故障占比",type:"line",yAxisIndex:1,symbol:"circle",symbolSize:10,lineStyle:{color:"#FFD700",width:3,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:6},itemStyle:{color:"#FFD700",borderColor:"#0f1c3c",borderWidth:2},label:{show:!0,position:"top",distance:15,formatter:"{c}%",color:"#FFD700",fontWeight:"bold",backgroundColor:"rgba(15,28,60,0.7)",padding:[3,8]},data:e.lines.map(t=>t.display_ratio),z:10,zlevel:10}]}}}},n=(i("defd"),i("2877")),o=Object(n.a)(s,(function(){var t=this._self._c;return t("div",{staticClass:"center_bottom"},[t("Echart",{staticClass:"echarts_bottom",attrs:{options:this.options,id:"bottomLeftChart"}})],1)}),[],!1,null,"3c16c3fa",null);e.a=o.exports},"9ef2":function(t,e,i){"use strict";var a=i("c270");let s={fontSize:24};var n={data:()=>({options:{},userOverview:{alarmNum:0,offlineNum:0,onlineNum:0,totalNum:0},pageflag:!0,timer:null,config:{number:[100],content:"{nt}",style:{...s,fill:"#00fdfa"}},onlineconfig:{number:[0],content:"{nt}",style:{...s,fill:"#07f7a8"}},offlineconfig:{number:[0],content:"{nt}",style:{...s,fill:"#e3b337"}},laramnumconfig:{number:[0],content:"{nt}",style:{...s,fill:"#f5023d"}}}),filters:{numsFilter:t=>t||0},created(){this.getData()},mounted(){},beforeDestroy(){this.clearData()},methods:{clearData(){this.timer&&(clearInterval(this.timer),this.timer=null)},getData(){this.pageflag=!0,Object(a.a)("shebeitongji").then(t=>{this.timer||console.log("设备总览",t),t.success?(this.userOverview=t.data,this.onlineconfig={...this.onlineconfig,number:[t.data.onlineNum]},this.config={...this.config,number:[t.data.totalNum]},this.offlineconfig={...this.offlineconfig,number:[t.data.offlineNum]},this.laramnumconfig={...this.laramnumconfig,number:[t.data.alarmNum]},this.switper()):(this.pageflag=!1,this.$Message.warning(t.msg))})},switper(){if(this.timer)return;this.timer=setInterval(t=>{this.getData()},this.$store.state.setting.echartsAutoTime)}}},o=(i("626c"),i("2877")),r=Object(o.a)(n,(function(){var t=this,e=t._self._c;return t.pageflag?e("ul",{staticClass:"user_Overview flex"},[e("li",{staticClass:"user_Overview-item",staticStyle:{color:"#00fdfa"}},[e("div",{staticClass:"user_Overview_nums allnum"},[e("dv-digital-flop",{staticStyle:{width:"100%",height:"100%"},attrs:{config:t.config}})],1),e("p",[t._v("设备总数")])]),e("li",{staticClass:"user_Overview-item",staticStyle:{color:"#07f7a8"}},[e("div",{staticClass:"user_Overview_nums online"},[e("dv-digital-flop",{staticStyle:{width:"100%",height:"100%"},attrs:{config:t.onlineconfig}})],1),e("p",[t._v("在线设备")])]),e("li",{staticClass:"user_Overview-item",staticStyle:{color:"#f5023d"}},[e("div",{staticClass:"user_Overview_nums laramnum"},[e("dv-digital-flop",{staticStyle:{width:"100%",height:"100%"},attrs:{config:t.laramnumconfig}})],1),e("p",[t._v("异常设备")])])]):e("Reacquire",{attrs:{"line-height":"200px"},on:{onclick:t.getData}},[t._v(" 重新获取 ")])}),[],!1,null,"659eff6d",null);e.a=r.exports},b4ff:function(t,e,i){"use strict";i("faad")},c270:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("4ec3");const s={fpytest:"/system/demo/getmapdata",oneweekfpy:"/system/demo/getoneweekfpy",onedayfpy:"/system/demo/getonedayfpy",guzhangzonglan:"/system/demo/guzhangzonglan",zhongdianguanzhu:"/system/demo/zhongdianguanzhu",mingrichuanqi:"/system/demo/mingrichuanqi",guzhangshichang:"/system/demo/guzhangshichang",shebeitongji:"/system/demo/shebeitongji",zidonghuamozuxinxi:"/system/demo/zidonghuamozuxinxi",gongchangjiadonglv:"/system/demo/gongchangjiadonglv",baojingshichangtongji:"/system/demo/baojingshichangtongji",mozuzhuangtaixinxi:"/system/demo/mozuzhuangtaixinxi",mozuchanliangdachenglv:"/system/demo/mozuchanliangdachenglv",fuzhuxianglianglv:"/system/demo/fuzhuxianglianglv",big1:"/bigscreen/countUserNum",big2:"/bigscreen/countDeviceNum",big3:"/bigscreen/sbtx",big4:"/bigscreen/alarmNum",big5:"/bigscreen/ssyj",big6:"/bigscreen/installationPlan",big7:"/bigscreen/ranking",big8:"/bigscreen/centermap"},n=(t,e)=>a.a(s[t],e)},defd:function(t,e,i){"use strict";i("8145")},ed08:function(t,e,i){"use strict";function a(t,e){if(t){const i=new Date(t),a={"M+":i.getMonth()+1,"d+":i.getDate(),"H+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(const t in a)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[t]:("00"+a[t]).substr((""+a[t]).length)));return e}return""}function s(t){if("string"==typeof t&&t.includes("%")){return parseFloat(t.replace("%",""))/100}return parseFloat(t)}i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}))},f8b7:function(t,e,i){"use strict";i("928e")},faad:function(t,e,i){}}]);